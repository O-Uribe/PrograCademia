{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\nicor\\\\OneDrive\\\\Documentos\\\\GitHub\\\\Taller_Integracion_III\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\nicor\\\\OneDrive\\\\Documentos\\\\GitHub\\\\Taller_Integracion_III\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\nicor\\\\OneDrive\\\\Documentos\\\\GitHub\\\\Taller_Integracion_III\\\\client\\\\src\\\\components\\\\Chat\\\\Chat.jsx\";\n\nimport React from \"react\";\nimport io from 'socket.io-client';\nimport { useEffect, useState } from \"react\";\nvar socket = io('http://localhost:4000');\n\nvar Chat = function Chat() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      messages = _useState4[0],\n      setMessages = _useState4[1];\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    socket.emit('message', message);\n    var newMessage = {\n      body: message,\n      from: 'Yo'\n    };\n    setMessages([newMessage].concat(_toConsumableArray(messages)));\n    setMessage('');\n  };\n\n  useEffect(function () {\n    var receiveMessage = function receiveMessage(message) {\n      setMessages([message].concat(_toConsumableArray(messages)));\n    };\n\n    socket.on('message', receiveMessage);\n    return function () {\n      socket.off('message', receiveMessage);\n    };\n  }, [messages]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 21\n    }\n  }, \" Chat con websockets\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: function onChange(e) {\n      return setMessage(e.target.value);\n    },\n    value: message,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }\n  }, messages.map(function (message, index) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 33\n      }\n    }, message.from, \": \", message.body));\n  })))));\n};\n\nexport default Chat;","map":{"version":3,"names":["React","io","useEffect","useState","socket","Chat","message","setMessage","messages","setMessages","handleSubmit","e","preventDefault","emit","newMessage","body","from","receiveMessage","on","off","target","value","map","index"],"sources":["C:/Users/nicor/OneDrive/Documentos/GitHub/Taller_Integracion_III/client/src/components/Chat/Chat.jsx"],"sourcesContent":["import React from \"react\";\r\nimport io from 'socket.io-client';\r\nimport {useEffect, useState } from \"react\";\r\n\r\nconst socket = io('http://localhost:4000');\r\n\r\n\r\nconst Chat = () => {\r\n    const [message, setMessage] = useState('');\r\n\tconst [messages, setMessages] = useState([]);\r\n\r\n  \r\n  \tconst handleSubmit = (e) => {\r\n    \te.preventDefault();\r\n    \tsocket.emit('message', message);\r\n\t\t\r\n\t\tconst newMessage = {\r\n      \t\tbody: message,\r\n      \t\tfrom: 'Yo'\r\n    \t};\r\n   \t\tsetMessages([ newMessage, ...messages ]);\r\n    \tsetMessage('');\r\n  \t};\r\n  \r\n\tuseEffect(() => {\r\n\t\tconst receiveMessage = (message) => {\r\n      \t\tsetMessages([message, ...messages]);   \r\n    \t};\r\n    \tsocket.on('message', receiveMessage);\r\n    \treturn () => {\r\n      \t\tsocket.off('message', receiveMessage);       \r\n  \t\t};\r\n\t}, [messages]);\r\n\r\n\r\n\r\n    return (\r\n        <div> \r\n            <div>\r\n                <form onSubmit={handleSubmit}>\r\n                    <h3> Chat con websockets</h3>\r\n                    <input \r\n                        type=\"text\" \r\n                        onChange={e=>setMessage(e.target.value)} \r\n                        value={message}\r\n                    />\r\n                    <ul>\r\n                        {messages.map((message, index) => (\r\n                            <li key={index}>\r\n                                <p>{message.from}: {message.body}</p>\r\n                            </li>\r\n                        ))}\t\r\n                    </ul>\t\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,SAAQC,SAAR,EAAmBC,QAAnB,QAAmC,OAAnC;AAEA,IAAMC,MAAM,GAAGH,EAAE,CAAC,uBAAD,CAAjB;;AAGA,IAAMI,IAAI,GAAG,SAAPA,IAAO,GAAM;EAAA,gBACeF,QAAQ,CAAC,EAAD,CADvB;EAAA;EAAA,IACRG,OADQ;EAAA,IACCC,UADD;;EAAA,iBAEcJ,QAAQ,CAAC,EAAD,CAFtB;EAAA;EAAA,IAEXK,QAFW;EAAA,IAEDC,WAFC;;EAKhB,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;IAC1BA,CAAC,CAACC,cAAF;IACAR,MAAM,CAACS,IAAP,CAAY,SAAZ,EAAuBP,OAAvB;IAEH,IAAMQ,UAAU,GAAG;MACbC,IAAI,EAAET,OADO;MAEbU,IAAI,EAAE;IAFO,CAAnB;IAIGP,WAAW,EAAGK,UAAH,4BAAkBN,QAAlB,GAAX;IACAD,UAAU,CAAC,EAAD,CAAV;EACD,CAVD;;EAYFL,SAAS,CAAC,YAAM;IACf,IAAMe,cAAc,GAAG,SAAjBA,cAAiB,CAACX,OAAD,EAAa;MAC9BG,WAAW,EAAEH,OAAF,4BAAcE,QAAd,GAAX;IACF,CAFJ;;IAGGJ,MAAM,CAACc,EAAP,CAAU,SAAV,EAAqBD,cAArB;IACA,OAAO,YAAM;MACVb,MAAM,CAACe,GAAP,CAAW,SAAX,EAAsBF,cAAtB;IACH,CAFA;EAGH,CARQ,EAQN,CAACT,QAAD,CARM,CAAT;EAYG,oBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAM,QAAQ,EAAEE,YAAhB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,0BADJ,eAEI;IACI,IAAI,EAAC,MADT;IAEI,QAAQ,EAAE,kBAAAC,CAAC;MAAA,OAAEJ,UAAU,CAACI,CAAC,CAACS,MAAF,CAASC,KAAV,CAAZ;IAAA,CAFf;IAGI,KAAK,EAAEf,OAHX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,eAOI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACKE,QAAQ,CAACc,GAAT,CAAa,UAAChB,OAAD,EAAUiB,KAAV;IAAA,oBACV;MAAI,GAAG,EAAEA,KAAT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAIjB,OAAO,CAACU,IAAZ,QAAoBV,OAAO,CAACS,IAA5B,CADJ,CADU;EAAA,CAAb,CADL,CAPJ,CADJ,CADJ,CADJ;AAqBH,CAlDD;;AAoDA,eAAeV,IAAf"},"metadata":{},"sourceType":"module"}